<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_2.dtd'>
<nta>
	<declaration>// Place global declarations here.
const int AgentNum = 4;
typedef int[0,AgentNum-1] AgentScale;
const int TaskNum = 4;
const int EventNum = 0;
const int MilestoneNum = 6;
const int MaxIteration = 2;

bool position[AgentNum][MilestoneNum]={{false,false,false,false,false,false},{false,false,false,false,false,false},{false,false,false,false,false,false},{false,false,false,false,false,false}};

//const int BCET[AgentNum][TaskNum]={{0,20,15,10},{0,20,15,10},{0,20,15,10},{0,20,15,10}};
//const int WCET[AgentNum][TaskNum]={{0,25,18,15},{0,25,18,15},{0,25,18,15},{0,25,18,15}};
const int RegularTaskNum[AgentNum] = {3,3,3,3};
chan move[AgentNum], initialize;

int iteration[AgentNum] = {0,0,0,0};

clock globalTime;

</declaration>
	<template>
		<name>Movement0</name>
		<parameter>const AgentScale id</parameter>
		<declaration>clock t;
</declaration>
		<location id="id0" x="-500" y="-300">
			<name x="-510" y="-330">initial</name>
			<urgent/>
		</location>
		<location id="id1" x="-400" y="-200">
			<name x="-410" y="-230">P0</name>
		</location>
		<location id="id2" x="-150" y="-100">
			<name x="-160" y="-130">F0T1</name>
			<label kind="invariant" x="-160" y="-85">t&lt;=7</label>
		</location>
		<location id="id3" x="-250" y="-50">
			<name x="-260" y="-80">P1</name>
		</location>
		<location id="id4" x="-300" y="50">
			<name x="-310" y="20">F1T0</name>
			<label kind="invariant" x="-310" y="65">t&lt;=7</label>
		</location>
		<location id="id5" x="0" y="50">
			<name x="-10" y="20">F1T2</name>
			<label kind="invariant" x="-10" y="65">t&lt;=3</label>
		</location>
		<location id="id6" x="150" y="50">
			<name x="140" y="20">F1T3</name>
			<label kind="invariant" x="140" y="65">t&lt;=5</label>
		</location>
		<location id="id7" x="450" y="50">
			<name x="440" y="20">F1T5</name>
			<label kind="invariant" x="440" y="65">t&lt;=1</label>
		</location>
		<location id="id8" x="-100" y="100">
			<name x="-110" y="70">P2</name>
		</location>
		<location id="id9" x="-150" y="200">
			<name x="-160" y="170">F2T1</name>
			<label kind="invariant" x="-160" y="215">t&lt;=3</label>
		</location>
		<location id="id10" x="150" y="200">
			<name x="140" y="170">F2T3</name>
			<label kind="invariant" x="140" y="215">t&lt;=1</label>
		</location>
		<location id="id11" x="300" y="200">
			<name x="290" y="170">F2T4</name>
			<label kind="invariant" x="290" y="215">t&lt;=1</label>
		</location>
		<location id="id12" x="50" y="250">
			<name x="40" y="220">P3</name>
		</location>
		<location id="id13" x="-150" y="350">
			<name x="-160" y="320">F3T1</name>
			<label kind="invariant" x="-160" y="365">t&lt;=5</label>
		</location>
		<location id="id14" x="0" y="350">
			<name x="-10" y="320">F3T2</name>
			<label kind="invariant" x="-10" y="365">t&lt;=1</label>
		</location>
		<location id="id15" x="450" y="350">
			<name x="440" y="320">F3T5</name>
			<label kind="invariant" x="440" y="365">t&lt;=7</label>
		</location>
		<location id="id16" x="200" y="400">
			<name x="190" y="370">P4</name>
		</location>
		<location id="id17" x="0" y="500">
			<name x="-10" y="470">F4T2</name>
			<label kind="invariant" x="-10" y="515">t&lt;=1</label>
		</location>
		<location id="id18" x="350" y="550">
			<name x="340" y="520">P5</name>
		</location>
		<location id="id19" x="0" y="650">
			<name x="-10" y="620">F5T2</name>
			<label kind="invariant" x="-10" y="665">t&lt;=1</label>
		</location>
		<init ref="id0"/>
		<transition>
			<source ref="id0"/>
			<target ref="id1"/>
			<label kind="assignment" x="-510" y="-250">position[id][0]=true</label>
		</transition>
		<transition>
			<source ref="id1"/>
			<target ref="id2"/>
			<label kind="synchronisation" x="-335" y="-165">move[id]?</label>
			<label kind="assignment" x="-335" y="-150">t=0,position[id][0]=false</label>
		</transition>
		<transition>
			<source ref="id2"/>
			<target ref="id3"/>
			<label kind="guard" x="-260" y="-105">t&gt;=7</label>
			<label kind="assignment" x="-260" y="-75">t=0,position[id][1]=true</label>
		</transition>
		<transition>
			<source ref="id3"/>
			<target ref="id4"/>
			<label kind="synchronisation" x="-335" y="-15">move[id]?</label>
			<label kind="assignment" x="-335" y="0">t=0,position[id][1]=false</label>
		</transition>
		<transition>
			<source ref="id4"/>
			<target ref="id1"/>
			<label kind="guard" x="-410" y="-105">t&gt;=7</label>
			<label kind="assignment" x="-410" y="-75">t=0,position[id][0]=true</label>
		</transition>
		<transition>
			<source ref="id3"/>
			<target ref="id5"/>
			<label kind="synchronisation" x="-185" y="-15">move[id]?</label>
			<label kind="assignment" x="-185" y="0">t=0,position[id][1]=false</label>
		</transition>
		<transition>
			<source ref="id5"/>
			<target ref="id8"/>
			<label kind="guard" x="-110" y="45">t&gt;=3</label>
			<label kind="assignment" x="-110" y="75">t=0,position[id][2]=true</label>
		</transition>
		<transition>
			<source ref="id3"/>
			<target ref="id6"/>
			<label kind="synchronisation" x="-110" y="-15">move[id]?</label>
			<label kind="assignment" x="-110" y="0">t=0,position[id][1]=false</label>
		</transition>
		<transition>
			<source ref="id6"/>
			<target ref="id12"/>
			<label kind="guard" x="40" y="120">t&gt;=5</label>
			<label kind="assignment" x="40" y="150">t=0,position[id][3]=true</label>
		</transition>
		<transition>
			<source ref="id3"/>
			<target ref="id7"/>
			<label kind="synchronisation" x="40" y="-15">move[id]?</label>
			<label kind="assignment" x="40" y="0">t=0,position[id][1]=false</label>
		</transition>
		<transition>
			<source ref="id7"/>
			<target ref="id18"/>
			<label kind="guard" x="340" y="270">t&gt;=1</label>
			<label kind="assignment" x="340" y="300">t=0,position[id][5]=true</label>
		</transition>
		<transition>
			<source ref="id8"/>
			<target ref="id9"/>
			<label kind="synchronisation" x="-185" y="135">move[id]?</label>
			<label kind="assignment" x="-185" y="150">t=0,position[id][2]=false</label>
		</transition>
		<transition>
			<source ref="id9"/>
			<target ref="id3"/>
			<label kind="guard" x="-260" y="45">t&gt;=3</label>
			<label kind="assignment" x="-260" y="75">t=0,position[id][1]=true</label>
		</transition>
		<transition>
			<source ref="id8"/>
			<target ref="id10"/>
			<label kind="synchronisation" x="-35" y="135">move[id]?</label>
			<label kind="assignment" x="-35" y="150">t=0,position[id][2]=false</label>
		</transition>
		<transition>
			<source ref="id10"/>
			<target ref="id12"/>
			<label kind="guard" x="40" y="195">t&gt;=1</label>
			<label kind="assignment" x="40" y="225">t=0,position[id][3]=true</label>
		</transition>
		<transition>
			<source ref="id8"/>
			<target ref="id11"/>
			<label kind="synchronisation" x="40" y="135">move[id]?</label>
			<label kind="assignment" x="40" y="150">t=0,position[id][2]=false</label>
		</transition>
		<transition>
			<source ref="id11"/>
			<target ref="id16"/>
			<label kind="guard" x="190" y="270">t&gt;=1</label>
			<label kind="assignment" x="190" y="300">t=0,position[id][4]=true</label>
		</transition>
		<transition>
			<source ref="id12"/>
			<target ref="id13"/>
			<label kind="synchronisation" x="-110" y="285">move[id]?</label>
			<label kind="assignment" x="-110" y="300">t=0,position[id][3]=false</label>
		</transition>
		<transition>
			<source ref="id13"/>
			<target ref="id3"/>
			<label kind="guard" x="-260" y="120">t&gt;=5</label>
			<label kind="assignment" x="-260" y="150">t=0,position[id][1]=true</label>
		</transition>
		<transition>
			<source ref="id12"/>
			<target ref="id14"/>
			<label kind="synchronisation" x="-35" y="285">move[id]?</label>
			<label kind="assignment" x="-35" y="300">t=0,position[id][3]=false</label>
		</transition>
		<transition>
			<source ref="id14"/>
			<target ref="id8"/>
			<label kind="guard" x="-110" y="195">t&gt;=1</label>
			<label kind="assignment" x="-110" y="225">t=0,position[id][2]=true</label>
		</transition>
		<transition>
			<source ref="id12"/>
			<target ref="id15"/>
			<label kind="synchronisation" x="190" y="285">move[id]?</label>
			<label kind="assignment" x="190" y="300">t=0,position[id][3]=false</label>
		</transition>
		<transition>
			<source ref="id15"/>
			<target ref="id18"/>
			<label kind="guard" x="340" y="420">t&gt;=7</label>
			<label kind="assignment" x="340" y="450">t=0,position[id][5]=true</label>
		</transition>
		<transition>
			<source ref="id16"/>
			<target ref="id17"/>
			<label kind="synchronisation" x="40" y="435">move[id]?</label>
			<label kind="assignment" x="40" y="450">t=0,position[id][4]=false</label>
		</transition>
		<transition>
			<source ref="id17"/>
			<target ref="id8"/>
			<label kind="guard" x="-110" y="270">t&gt;=1</label>
			<label kind="assignment" x="-110" y="300">t=0,position[id][2]=true</label>
		</transition>
		<transition>
			<source ref="id18"/>
			<target ref="id19"/>
			<label kind="synchronisation" x="115" y="585">move[id]?</label>
			<label kind="assignment" x="115" y="600">t=0,position[id][5]=false</label>
		</transition>
		<transition>
			<source ref="id19"/>
			<target ref="id8"/>
			<label kind="guard" x="-110" y="345">t&gt;=1</label>
			<label kind="assignment" x="-110" y="375">t=0,position[id][2]=true</label>
		</transition>
	</template>
	<template>
		<name>TaskExecution0</name>
		<parameter>const AgentScale id</parameter>
		<declaration>clock t;
bool tf[TaskNum]={true,false,false,false};
bool ts[TaskNum]={true,false,false,false};

void updateIteration()
{
	int i=0;
	bool finish = true;
	for(i=1;i&lt;=RegularTaskNum[id];i++)
	{
		finish &amp;= tf[i];
	}
	if(finish)
	{
		for(i=1;i&lt;=RegularTaskNum[id];i++)
		{
			tf[i]=false;
		}
		
		iteration[id]+=1;
		if(iteration[id]==MaxIteration)
		{
			iteration[id]=0;
		}
	}
	else
	{
    	finish = true;
	}
}

</declaration>
		<location id="id20" x="-400" y="-200">
			<name x="-410" y="-230">T0</name>
		</location>
		<location id="id21" x="-700" y="-200">
			<name x="-710" y="-230">T1</name>
			<label kind="invariant" x="-710" y="-185">t&lt;=15</label>
		</location>
		<location id="id22" x="-400" y="-500">
			<name x="-410" y="-530">T2</name>
			<label kind="invariant" x="-410" y="-485">t&lt;=10</label>
		</location>
		<location id="id23" x="-100" y="-200">
			<name x="-110" y="-230">T3</name>
			<label kind="invariant" x="-110" y="-185">t&lt;=12</label>
		</location>
		<init ref="id20"/>
		<transition>
			<source ref="id20"/>
			<target ref="id20"/>
			<label kind="synchronisation" x="-460" y="-215">move[id]!</label>
			<label kind="assignment" x="-460" y="-200">t=0</label>
			<nail x="-430" y="-230"/>
			<nail x="-370" y="-230"/>
		</transition>
		<transition>
			<source ref="id20"/>
			<target ref="id21"/>
			<label kind="guard" x="-610" y="-230">position[id][2]</label>
			<label kind="assignment" x="-610" y="-200">t=0,ts[1]=true,tf[1]=false</label>
		</transition>
		<transition>
			<source ref="id21"/>
			<target ref="id20"/>
			<label kind="guard" x="-550" y="0">t&gt;=15</label>
			<label kind="assignment" x="-520" y="30">t=0,ts[1]=false,tf[1]=true,
updateIteration()</label>
			<nail x="-550" y="0"/>
		</transition>
		<transition>
			<source ref="id20"/>
			<target ref="id22"/>
			<label kind="guard" x="-460" y="-380">position[id][0]&amp;&amp;(tf[1])</label>
			<label kind="assignment" x="-460" y="-350">t=0,ts[2]=true,tf[2]=false</label>
		</transition>
		<transition>
			<source ref="id22"/>
			<target ref="id20"/>
			<label kind="guard" x="-550" y="-350">t&gt;=10</label>
			<label kind="assignment" x="-520" y="-320">t=0,ts[2]=false,tf[2]=true,
updateIteration()</label>
			<nail x="-550" y="-350"/>
		</transition>
		<transition>
			<source ref="id20"/>
			<target ref="id23"/>
			<label kind="guard" x="-310" y="-230">position[id][4]&amp;&amp;(tf[2])</label>
			<label kind="assignment" x="-310" y="-200">t=0,ts[3]=true,tf[3]=false</label>
		</transition>
		<transition>
			<source ref="id23"/>
			<target ref="id20"/>
			<label kind="guard" x="-250" y="-350">t&gt;=12</label>
			<label kind="assignment" x="-220" y="-320">t=0,ts[3]=false,tf[3]=true,
updateIteration()</label>
			<nail x="-250" y="-350"/>
		</transition>
	</template>
	<template>
		<name>Movement1</name>
		<parameter>const AgentScale id</parameter>
		<declaration>clock t;
</declaration>
		<location id="id24" x="-500" y="-300">
			<name x="-510" y="-330">initial</name>
			<urgent/>
		</location>
		<location id="id25" x="-400" y="-200">
			<name x="-410" y="-230">P0</name>
		</location>
		<location id="id26" x="-150" y="-100">
			<name x="-160" y="-130">F0T1</name>
			<label kind="invariant" x="-160" y="-85">t&lt;=7</label>
		</location>
		<location id="id27" x="-250" y="-50">
			<name x="-260" y="-80">P1</name>
		</location>
		<location id="id28" x="-300" y="50">
			<name x="-310" y="20">F1T0</name>
			<label kind="invariant" x="-310" y="65">t&lt;=7</label>
		</location>
		<location id="id29" x="0" y="50">
			<name x="-10" y="20">F1T2</name>
			<label kind="invariant" x="-10" y="65">t&lt;=3</label>
		</location>
		<location id="id30" x="150" y="50">
			<name x="140" y="20">F1T3</name>
			<label kind="invariant" x="140" y="65">t&lt;=5</label>
		</location>
		<location id="id31" x="450" y="50">
			<name x="440" y="20">F1T5</name>
			<label kind="invariant" x="440" y="65">t&lt;=1</label>
		</location>
		<location id="id32" x="-100" y="100">
			<name x="-110" y="70">P2</name>
		</location>
		<location id="id33" x="-150" y="200">
			<name x="-160" y="170">F2T1</name>
			<label kind="invariant" x="-160" y="215">t&lt;=3</label>
		</location>
		<location id="id34" x="150" y="200">
			<name x="140" y="170">F2T3</name>
			<label kind="invariant" x="140" y="215">t&lt;=1</label>
		</location>
		<location id="id35" x="300" y="200">
			<name x="290" y="170">F2T4</name>
			<label kind="invariant" x="290" y="215">t&lt;=1</label>
		</location>
		<location id="id36" x="50" y="250">
			<name x="40" y="220">P3</name>
		</location>
		<location id="id37" x="-150" y="350">
			<name x="-160" y="320">F3T1</name>
			<label kind="invariant" x="-160" y="365">t&lt;=5</label>
		</location>
		<location id="id38" x="0" y="350">
			<name x="-10" y="320">F3T2</name>
			<label kind="invariant" x="-10" y="365">t&lt;=1</label>
		</location>
		<location id="id39" x="450" y="350">
			<name x="440" y="320">F3T5</name>
			<label kind="invariant" x="440" y="365">t&lt;=7</label>
		</location>
		<location id="id40" x="200" y="400">
			<name x="190" y="370">P4</name>
		</location>
		<location id="id41" x="0" y="500">
			<name x="-10" y="470">F4T2</name>
			<label kind="invariant" x="-10" y="515">t&lt;=1</label>
		</location>
		<location id="id42" x="350" y="550">
			<name x="340" y="520">P5</name>
		</location>
		<location id="id43" x="0" y="650">
			<name x="-10" y="620">F5T2</name>
			<label kind="invariant" x="-10" y="665">t&lt;=1</label>
		</location>
		<init ref="id24"/>
		<transition>
			<source ref="id24"/>
			<target ref="id25"/>
			<label kind="assignment" x="-510" y="-250">position[id][0]=true</label>
		</transition>
		<transition>
			<source ref="id25"/>
			<target ref="id26"/>
			<label kind="synchronisation" x="-335" y="-165">move[id]?</label>
			<label kind="assignment" x="-335" y="-150">t=0,position[id][0]=false</label>
		</transition>
		<transition>
			<source ref="id26"/>
			<target ref="id27"/>
			<label kind="guard" x="-260" y="-105">t&gt;=7</label>
			<label kind="assignment" x="-260" y="-75">t=0,position[id][1]=true</label>
		</transition>
		<transition>
			<source ref="id27"/>
			<target ref="id28"/>
			<label kind="synchronisation" x="-335" y="-15">move[id]?</label>
			<label kind="assignment" x="-335" y="0">t=0,position[id][1]=false</label>
		</transition>
		<transition>
			<source ref="id28"/>
			<target ref="id25"/>
			<label kind="guard" x="-410" y="-105">t&gt;=7</label>
			<label kind="assignment" x="-410" y="-75">t=0,position[id][0]=true</label>
		</transition>
		<transition>
			<source ref="id27"/>
			<target ref="id29"/>
			<label kind="synchronisation" x="-185" y="-15">move[id]?</label>
			<label kind="assignment" x="-185" y="0">t=0,position[id][1]=false</label>
		</transition>
		<transition>
			<source ref="id29"/>
			<target ref="id32"/>
			<label kind="guard" x="-110" y="45">t&gt;=3</label>
			<label kind="assignment" x="-110" y="75">t=0,position[id][2]=true</label>
		</transition>
		<transition>
			<source ref="id27"/>
			<target ref="id30"/>
			<label kind="synchronisation" x="-110" y="-15">move[id]?</label>
			<label kind="assignment" x="-110" y="0">t=0,position[id][1]=false</label>
		</transition>
		<transition>
			<source ref="id30"/>
			<target ref="id36"/>
			<label kind="guard" x="40" y="120">t&gt;=5</label>
			<label kind="assignment" x="40" y="150">t=0,position[id][3]=true</label>
		</transition>
		<transition>
			<source ref="id27"/>
			<target ref="id31"/>
			<label kind="synchronisation" x="40" y="-15">move[id]?</label>
			<label kind="assignment" x="40" y="0">t=0,position[id][1]=false</label>
		</transition>
		<transition>
			<source ref="id31"/>
			<target ref="id42"/>
			<label kind="guard" x="340" y="270">t&gt;=1</label>
			<label kind="assignment" x="340" y="300">t=0,position[id][5]=true</label>
		</transition>
		<transition>
			<source ref="id32"/>
			<target ref="id33"/>
			<label kind="synchronisation" x="-185" y="135">move[id]?</label>
			<label kind="assignment" x="-185" y="150">t=0,position[id][2]=false</label>
		</transition>
		<transition>
			<source ref="id33"/>
			<target ref="id27"/>
			<label kind="guard" x="-260" y="45">t&gt;=3</label>
			<label kind="assignment" x="-260" y="75">t=0,position[id][1]=true</label>
		</transition>
		<transition>
			<source ref="id32"/>
			<target ref="id34"/>
			<label kind="synchronisation" x="-35" y="135">move[id]?</label>
			<label kind="assignment" x="-35" y="150">t=0,position[id][2]=false</label>
		</transition>
		<transition>
			<source ref="id34"/>
			<target ref="id36"/>
			<label kind="guard" x="40" y="195">t&gt;=1</label>
			<label kind="assignment" x="40" y="225">t=0,position[id][3]=true</label>
		</transition>
		<transition>
			<source ref="id32"/>
			<target ref="id35"/>
			<label kind="synchronisation" x="40" y="135">move[id]?</label>
			<label kind="assignment" x="40" y="150">t=0,position[id][2]=false</label>
		</transition>
		<transition>
			<source ref="id35"/>
			<target ref="id40"/>
			<label kind="guard" x="190" y="270">t&gt;=1</label>
			<label kind="assignment" x="190" y="300">t=0,position[id][4]=true</label>
		</transition>
		<transition>
			<source ref="id36"/>
			<target ref="id37"/>
			<label kind="synchronisation" x="-110" y="285">move[id]?</label>
			<label kind="assignment" x="-110" y="300">t=0,position[id][3]=false</label>
		</transition>
		<transition>
			<source ref="id37"/>
			<target ref="id27"/>
			<label kind="guard" x="-260" y="120">t&gt;=5</label>
			<label kind="assignment" x="-260" y="150">t=0,position[id][1]=true</label>
		</transition>
		<transition>
			<source ref="id36"/>
			<target ref="id38"/>
			<label kind="synchronisation" x="-35" y="285">move[id]?</label>
			<label kind="assignment" x="-35" y="300">t=0,position[id][3]=false</label>
		</transition>
		<transition>
			<source ref="id38"/>
			<target ref="id32"/>
			<label kind="guard" x="-110" y="195">t&gt;=1</label>
			<label kind="assignment" x="-110" y="225">t=0,position[id][2]=true</label>
		</transition>
		<transition>
			<source ref="id36"/>
			<target ref="id39"/>
			<label kind="synchronisation" x="190" y="285">move[id]?</label>
			<label kind="assignment" x="190" y="300">t=0,position[id][3]=false</label>
		</transition>
		<transition>
			<source ref="id39"/>
			<target ref="id42"/>
			<label kind="guard" x="340" y="420">t&gt;=7</label>
			<label kind="assignment" x="340" y="450">t=0,position[id][5]=true</label>
		</transition>
		<transition>
			<source ref="id40"/>
			<target ref="id41"/>
			<label kind="synchronisation" x="40" y="435">move[id]?</label>
			<label kind="assignment" x="40" y="450">t=0,position[id][4]=false</label>
		</transition>
		<transition>
			<source ref="id41"/>
			<target ref="id32"/>
			<label kind="guard" x="-110" y="270">t&gt;=1</label>
			<label kind="assignment" x="-110" y="300">t=0,position[id][2]=true</label>
		</transition>
		<transition>
			<source ref="id42"/>
			<target ref="id43"/>
			<label kind="synchronisation" x="115" y="585">move[id]?</label>
			<label kind="assignment" x="115" y="600">t=0,position[id][5]=false</label>
		</transition>
		<transition>
			<source ref="id43"/>
			<target ref="id32"/>
			<label kind="guard" x="-110" y="345">t&gt;=1</label>
			<label kind="assignment" x="-110" y="375">t=0,position[id][2]=true</label>
		</transition>
	</template>
	<template>
		<name>TaskExecution1</name>
		<parameter>const AgentScale id</parameter>
		<declaration>clock t;
bool tf[TaskNum]={true,false,false,false};
bool ts[TaskNum]={true,false,false,false};

void updateIteration()
{
	int i=0;
	bool finish = true;
	for(i=1;i&lt;=RegularTaskNum[id];i++)
	{
		finish &amp;= tf[i];
	}
	if(finish)
	{
		for(i=1;i&lt;=RegularTaskNum[id];i++)
		{
			tf[i]=false;
		}
		
		iteration[id]+=1;
		if(iteration[id]==MaxIteration)
		{
			iteration[id]=0;
		}
	}
	else
	{
    	finish = true;
	}
}

</declaration>
		<location id="id44" x="-400" y="-200">
			<name x="-410" y="-230">T0</name>
		</location>
		<location id="id45" x="-700" y="-200">
			<name x="-710" y="-230">T1</name>
			<label kind="invariant" x="-710" y="-185">t&lt;=27</label>
		</location>
		<location id="id46" x="-400" y="-500">
			<name x="-410" y="-530">T2</name>
			<label kind="invariant" x="-410" y="-485">t&lt;=19</label>
		</location>
		<location id="id47" x="-100" y="-200">
			<name x="-110" y="-230">T3</name>
			<label kind="invariant" x="-110" y="-185">t&lt;=12</label>
		</location>
		<init ref="id44"/>
		<transition>
			<source ref="id44"/>
			<target ref="id44"/>
			<label kind="synchronisation" x="-460" y="-215">move[id]!</label>
			<label kind="assignment" x="-460" y="-200">t=0</label>
			<nail x="-430" y="-230"/>
			<nail x="-370" y="-230"/>
		</transition>
		<transition>
			<source ref="id44"/>
			<target ref="id45"/>
			<label kind="guard" x="-610" y="-230">position[id][1]</label>
			<label kind="assignment" x="-610" y="-200">t=0,ts[1]=true,tf[1]=false</label>
		</transition>
		<transition>
			<source ref="id45"/>
			<target ref="id44"/>
			<label kind="guard" x="-550" y="0">t&gt;=27</label>
			<label kind="assignment" x="-520" y="30">t=0,ts[1]=false,tf[1]=true,
updateIteration()</label>
			<nail x="-550" y="0"/>
		</transition>
		<transition>
			<source ref="id44"/>
			<target ref="id46"/>
			<label kind="guard" x="-460" y="-380">position[id][3]&amp;&amp;(tf[0])</label>
			<label kind="assignment" x="-460" y="-350">t=0,ts[2]=true,tf[2]=false</label>
		</transition>
		<transition>
			<source ref="id46"/>
			<target ref="id44"/>
			<label kind="guard" x="-550" y="-350">t&gt;=19</label>
			<label kind="assignment" x="-520" y="-320">t=0,ts[2]=false,tf[2]=true,
updateIteration()</label>
			<nail x="-550" y="-350"/>
		</transition>
		<transition>
			<source ref="id44"/>
			<target ref="id47"/>
			<label kind="guard" x="-310" y="-230">position[id][5]&amp;&amp;(tf[2])</label>
			<label kind="assignment" x="-310" y="-200">t=0,ts[3]=true,tf[3]=false</label>
		</transition>
		<transition>
			<source ref="id47"/>
			<target ref="id44"/>
			<label kind="guard" x="-250" y="-350">t&gt;=12</label>
			<label kind="assignment" x="-220" y="-320">t=0,ts[3]=false,tf[3]=true,
updateIteration()</label>
			<nail x="-250" y="-350"/>
		</transition>
	</template>
	<template>
		<name>Movement2</name>
		<parameter>const AgentScale id</parameter>
		<declaration>clock t;
</declaration>
		<location id="id48" x="-500" y="-300">
			<name x="-510" y="-330">initial</name>
			<urgent/>
		</location>
		<location id="id49" x="-400" y="-200">
			<name x="-410" y="-230">P0</name>
		</location>
		<location id="id50" x="-150" y="-100">
			<name x="-160" y="-130">F0T1</name>
			<label kind="invariant" x="-160" y="-85">t&lt;=7</label>
		</location>
		<location id="id51" x="-250" y="-50">
			<name x="-260" y="-80">P1</name>
		</location>
		<location id="id52" x="-300" y="50">
			<name x="-310" y="20">F1T0</name>
			<label kind="invariant" x="-310" y="65">t&lt;=7</label>
		</location>
		<location id="id53" x="0" y="50">
			<name x="-10" y="20">F1T2</name>
			<label kind="invariant" x="-10" y="65">t&lt;=3</label>
		</location>
		<location id="id54" x="150" y="50">
			<name x="140" y="20">F1T3</name>
			<label kind="invariant" x="140" y="65">t&lt;=5</label>
		</location>
		<location id="id55" x="450" y="50">
			<name x="440" y="20">F1T5</name>
			<label kind="invariant" x="440" y="65">t&lt;=1</label>
		</location>
		<location id="id56" x="-100" y="100">
			<name x="-110" y="70">P2</name>
		</location>
		<location id="id57" x="-150" y="200">
			<name x="-160" y="170">F2T1</name>
			<label kind="invariant" x="-160" y="215">t&lt;=3</label>
		</location>
		<location id="id58" x="150" y="200">
			<name x="140" y="170">F2T3</name>
			<label kind="invariant" x="140" y="215">t&lt;=1</label>
		</location>
		<location id="id59" x="300" y="200">
			<name x="290" y="170">F2T4</name>
			<label kind="invariant" x="290" y="215">t&lt;=1</label>
		</location>
		<location id="id60" x="50" y="250">
			<name x="40" y="220">P3</name>
		</location>
		<location id="id61" x="-150" y="350">
			<name x="-160" y="320">F3T1</name>
			<label kind="invariant" x="-160" y="365">t&lt;=5</label>
		</location>
		<location id="id62" x="0" y="350">
			<name x="-10" y="320">F3T2</name>
			<label kind="invariant" x="-10" y="365">t&lt;=1</label>
		</location>
		<location id="id63" x="450" y="350">
			<name x="440" y="320">F3T5</name>
			<label kind="invariant" x="440" y="365">t&lt;=7</label>
		</location>
		<location id="id64" x="200" y="400">
			<name x="190" y="370">P4</name>
		</location>
		<location id="id65" x="0" y="500">
			<name x="-10" y="470">F4T2</name>
			<label kind="invariant" x="-10" y="515">t&lt;=1</label>
		</location>
		<location id="id66" x="350" y="550">
			<name x="340" y="520">P5</name>
		</location>
		<location id="id67" x="0" y="650">
			<name x="-10" y="620">F5T2</name>
			<label kind="invariant" x="-10" y="665">t&lt;=1</label>
		</location>
		<init ref="id48"/>
		<transition>
			<source ref="id48"/>
			<target ref="id49"/>
			<label kind="assignment" x="-510" y="-250">position[id][0]=true</label>
		</transition>
		<transition>
			<source ref="id49"/>
			<target ref="id50"/>
			<label kind="synchronisation" x="-335" y="-165">move[id]?</label>
			<label kind="assignment" x="-335" y="-150">t=0,position[id][0]=false</label>
		</transition>
		<transition>
			<source ref="id50"/>
			<target ref="id51"/>
			<label kind="guard" x="-260" y="-105">t&gt;=7</label>
			<label kind="assignment" x="-260" y="-75">t=0,position[id][1]=true</label>
		</transition>
		<transition>
			<source ref="id51"/>
			<target ref="id52"/>
			<label kind="synchronisation" x="-335" y="-15">move[id]?</label>
			<label kind="assignment" x="-335" y="0">t=0,position[id][1]=false</label>
		</transition>
		<transition>
			<source ref="id52"/>
			<target ref="id49"/>
			<label kind="guard" x="-410" y="-105">t&gt;=7</label>
			<label kind="assignment" x="-410" y="-75">t=0,position[id][0]=true</label>
		</transition>
		<transition>
			<source ref="id51"/>
			<target ref="id53"/>
			<label kind="synchronisation" x="-185" y="-15">move[id]?</label>
			<label kind="assignment" x="-185" y="0">t=0,position[id][1]=false</label>
		</transition>
		<transition>
			<source ref="id53"/>
			<target ref="id56"/>
			<label kind="guard" x="-110" y="45">t&gt;=3</label>
			<label kind="assignment" x="-110" y="75">t=0,position[id][2]=true</label>
		</transition>
		<transition>
			<source ref="id51"/>
			<target ref="id54"/>
			<label kind="synchronisation" x="-110" y="-15">move[id]?</label>
			<label kind="assignment" x="-110" y="0">t=0,position[id][1]=false</label>
		</transition>
		<transition>
			<source ref="id54"/>
			<target ref="id60"/>
			<label kind="guard" x="40" y="120">t&gt;=5</label>
			<label kind="assignment" x="40" y="150">t=0,position[id][3]=true</label>
		</transition>
		<transition>
			<source ref="id51"/>
			<target ref="id55"/>
			<label kind="synchronisation" x="40" y="-15">move[id]?</label>
			<label kind="assignment" x="40" y="0">t=0,position[id][1]=false</label>
		</transition>
		<transition>
			<source ref="id55"/>
			<target ref="id66"/>
			<label kind="guard" x="340" y="270">t&gt;=1</label>
			<label kind="assignment" x="340" y="300">t=0,position[id][5]=true</label>
		</transition>
		<transition>
			<source ref="id56"/>
			<target ref="id57"/>
			<label kind="synchronisation" x="-185" y="135">move[id]?</label>
			<label kind="assignment" x="-185" y="150">t=0,position[id][2]=false</label>
		</transition>
		<transition>
			<source ref="id57"/>
			<target ref="id51"/>
			<label kind="guard" x="-260" y="45">t&gt;=3</label>
			<label kind="assignment" x="-260" y="75">t=0,position[id][1]=true</label>
		</transition>
		<transition>
			<source ref="id56"/>
			<target ref="id58"/>
			<label kind="synchronisation" x="-35" y="135">move[id]?</label>
			<label kind="assignment" x="-35" y="150">t=0,position[id][2]=false</label>
		</transition>
		<transition>
			<source ref="id58"/>
			<target ref="id60"/>
			<label kind="guard" x="40" y="195">t&gt;=1</label>
			<label kind="assignment" x="40" y="225">t=0,position[id][3]=true</label>
		</transition>
		<transition>
			<source ref="id56"/>
			<target ref="id59"/>
			<label kind="synchronisation" x="40" y="135">move[id]?</label>
			<label kind="assignment" x="40" y="150">t=0,position[id][2]=false</label>
		</transition>
		<transition>
			<source ref="id59"/>
			<target ref="id64"/>
			<label kind="guard" x="190" y="270">t&gt;=1</label>
			<label kind="assignment" x="190" y="300">t=0,position[id][4]=true</label>
		</transition>
		<transition>
			<source ref="id60"/>
			<target ref="id61"/>
			<label kind="synchronisation" x="-110" y="285">move[id]?</label>
			<label kind="assignment" x="-110" y="300">t=0,position[id][3]=false</label>
		</transition>
		<transition>
			<source ref="id61"/>
			<target ref="id51"/>
			<label kind="guard" x="-260" y="120">t&gt;=5</label>
			<label kind="assignment" x="-260" y="150">t=0,position[id][1]=true</label>
		</transition>
		<transition>
			<source ref="id60"/>
			<target ref="id62"/>
			<label kind="synchronisation" x="-35" y="285">move[id]?</label>
			<label kind="assignment" x="-35" y="300">t=0,position[id][3]=false</label>
		</transition>
		<transition>
			<source ref="id62"/>
			<target ref="id56"/>
			<label kind="guard" x="-110" y="195">t&gt;=1</label>
			<label kind="assignment" x="-110" y="225">t=0,position[id][2]=true</label>
		</transition>
		<transition>
			<source ref="id60"/>
			<target ref="id63"/>
			<label kind="synchronisation" x="190" y="285">move[id]?</label>
			<label kind="assignment" x="190" y="300">t=0,position[id][3]=false</label>
		</transition>
		<transition>
			<source ref="id63"/>
			<target ref="id66"/>
			<label kind="guard" x="340" y="420">t&gt;=7</label>
			<label kind="assignment" x="340" y="450">t=0,position[id][5]=true</label>
		</transition>
		<transition>
			<source ref="id64"/>
			<target ref="id65"/>
			<label kind="synchronisation" x="40" y="435">move[id]?</label>
			<label kind="assignment" x="40" y="450">t=0,position[id][4]=false</label>
		</transition>
		<transition>
			<source ref="id65"/>
			<target ref="id56"/>
			<label kind="guard" x="-110" y="270">t&gt;=1</label>
			<label kind="assignment" x="-110" y="300">t=0,position[id][2]=true</label>
		</transition>
		<transition>
			<source ref="id66"/>
			<target ref="id67"/>
			<label kind="synchronisation" x="115" y="585">move[id]?</label>
			<label kind="assignment" x="115" y="600">t=0,position[id][5]=false</label>
		</transition>
		<transition>
			<source ref="id67"/>
			<target ref="id56"/>
			<label kind="guard" x="-110" y="345">t&gt;=1</label>
			<label kind="assignment" x="-110" y="375">t=0,position[id][2]=true</label>
		</transition>
	</template>
	<template>
		<name>TaskExecution2</name>
		<parameter>const AgentScale id</parameter>
		<declaration>clock t;
bool tf[TaskNum]={true,false,false,false};
bool ts[TaskNum]={true,false,false,false};

void updateIteration()
{
	int i=0;
	bool finish = true;
	for(i=1;i&lt;=RegularTaskNum[id];i++)
	{
		finish &amp;= tf[i];
	}
	if(finish)
	{
		for(i=1;i&lt;=RegularTaskNum[id];i++)
		{
			tf[i]=false;
		}
		
		iteration[id]+=1;
		if(iteration[id]==MaxIteration)
		{
			iteration[id]=0;
		}
	}
	else
	{
    	finish = true;
	}
}

</declaration>
		<location id="id68" x="-400" y="-200">
			<name x="-410" y="-230">T0</name>
		</location>
		<location id="id69" x="-700" y="-200">
			<name x="-710" y="-230">T1</name>
			<label kind="invariant" x="-710" y="-185">t&lt;=13</label>
		</location>
		<location id="id70" x="-400" y="-500">
			<name x="-410" y="-530">T2</name>
			<label kind="invariant" x="-410" y="-485">t&lt;=7</label>
		</location>
		<location id="id71" x="-100" y="-200">
			<name x="-110" y="-230">T3</name>
			<label kind="invariant" x="-110" y="-185">t&lt;=18</label>
		</location>
		<init ref="id68"/>
		<transition>
			<source ref="id68"/>
			<target ref="id68"/>
			<label kind="synchronisation" x="-460" y="-215">move[id]!</label>
			<label kind="assignment" x="-460" y="-200">t=0</label>
			<nail x="-430" y="-230"/>
			<nail x="-370" y="-230"/>
		</transition>
		<transition>
			<source ref="id68"/>
			<target ref="id69"/>
			<label kind="guard" x="-610" y="-230">position[id][0]</label>
			<label kind="assignment" x="-610" y="-200">t=0,ts[1]=true,tf[1]=false</label>
		</transition>
		<transition>
			<source ref="id69"/>
			<target ref="id68"/>
			<label kind="guard" x="-550" y="0">t&gt;=13</label>
			<label kind="assignment" x="-520" y="30">t=0,ts[1]=false,tf[1]=true,
updateIteration()</label>
			<nail x="-550" y="0"/>
		</transition>
		<transition>
			<source ref="id68"/>
			<target ref="id70"/>
			<label kind="guard" x="-460" y="-380">position[id][0]&amp;&amp;(tf[1])</label>
			<label kind="assignment" x="-460" y="-350">t=0,ts[2]=true,tf[2]=false</label>
		</transition>
		<transition>
			<source ref="id70"/>
			<target ref="id68"/>
			<label kind="guard" x="-550" y="-350">t&gt;=7</label>
			<label kind="assignment" x="-520" y="-320">t=0,ts[2]=false,tf[2]=true,
updateIteration()</label>
			<nail x="-550" y="-350"/>
		</transition>
		<transition>
			<source ref="id68"/>
			<target ref="id71"/>
			<label kind="guard" x="-310" y="-230">position[id][1]&amp;&amp;(tf[2])</label>
			<label kind="assignment" x="-310" y="-200">t=0,ts[3]=true,tf[3]=false</label>
		</transition>
		<transition>
			<source ref="id71"/>
			<target ref="id68"/>
			<label kind="guard" x="-250" y="-350">t&gt;=18</label>
			<label kind="assignment" x="-220" y="-320">t=0,ts[3]=false,tf[3]=true,
updateIteration()</label>
			<nail x="-250" y="-350"/>
		</transition>
	</template>
	<template>
		<name>Movement3</name>
		<parameter>const AgentScale id</parameter>
		<declaration>clock t;
</declaration>
		<location id="id72" x="-500" y="-300">
			<name x="-510" y="-330">initial</name>
			<urgent/>
		</location>
		<location id="id73" x="-400" y="-200">
			<name x="-410" y="-230">P0</name>
		</location>
		<location id="id74" x="-150" y="-100">
			<name x="-160" y="-130">F0T1</name>
			<label kind="invariant" x="-160" y="-85">t&lt;=7</label>
		</location>
		<location id="id75" x="-250" y="-50">
			<name x="-260" y="-80">P1</name>
		</location>
		<location id="id76" x="-300" y="50">
			<name x="-310" y="20">F1T0</name>
			<label kind="invariant" x="-310" y="65">t&lt;=7</label>
		</location>
		<location id="id77" x="0" y="50">
			<name x="-10" y="20">F1T2</name>
			<label kind="invariant" x="-10" y="65">t&lt;=3</label>
		</location>
		<location id="id78" x="150" y="50">
			<name x="140" y="20">F1T3</name>
			<label kind="invariant" x="140" y="65">t&lt;=5</label>
		</location>
		<location id="id79" x="450" y="50">
			<name x="440" y="20">F1T5</name>
			<label kind="invariant" x="440" y="65">t&lt;=1</label>
		</location>
		<location id="id80" x="-100" y="100">
			<name x="-110" y="70">P2</name>
		</location>
		<location id="id81" x="-150" y="200">
			<name x="-160" y="170">F2T1</name>
			<label kind="invariant" x="-160" y="215">t&lt;=3</label>
		</location>
		<location id="id82" x="150" y="200">
			<name x="140" y="170">F2T3</name>
			<label kind="invariant" x="140" y="215">t&lt;=1</label>
		</location>
		<location id="id83" x="300" y="200">
			<name x="290" y="170">F2T4</name>
			<label kind="invariant" x="290" y="215">t&lt;=1</label>
		</location>
		<location id="id84" x="50" y="250">
			<name x="40" y="220">P3</name>
		</location>
		<location id="id85" x="-150" y="350">
			<name x="-160" y="320">F3T1</name>
			<label kind="invariant" x="-160" y="365">t&lt;=5</label>
		</location>
		<location id="id86" x="0" y="350">
			<name x="-10" y="320">F3T2</name>
			<label kind="invariant" x="-10" y="365">t&lt;=1</label>
		</location>
		<location id="id87" x="450" y="350">
			<name x="440" y="320">F3T5</name>
			<label kind="invariant" x="440" y="365">t&lt;=7</label>
		</location>
		<location id="id88" x="200" y="400">
			<name x="190" y="370">P4</name>
		</location>
		<location id="id89" x="0" y="500">
			<name x="-10" y="470">F4T2</name>
			<label kind="invariant" x="-10" y="515">t&lt;=1</label>
		</location>
		<location id="id90" x="350" y="550">
			<name x="340" y="520">P5</name>
		</location>
		<location id="id91" x="0" y="650">
			<name x="-10" y="620">F5T2</name>
			<label kind="invariant" x="-10" y="665">t&lt;=1</label>
		</location>
		<init ref="id72"/>
		<transition>
			<source ref="id72"/>
			<target ref="id73"/>
			<label kind="assignment" x="-510" y="-250">position[id][0]=true</label>
		</transition>
		<transition>
			<source ref="id73"/>
			<target ref="id74"/>
			<label kind="synchronisation" x="-335" y="-165">move[id]?</label>
			<label kind="assignment" x="-335" y="-150">t=0,position[id][0]=false</label>
		</transition>
		<transition>
			<source ref="id74"/>
			<target ref="id75"/>
			<label kind="guard" x="-260" y="-105">t&gt;=7</label>
			<label kind="assignment" x="-260" y="-75">t=0,position[id][1]=true</label>
		</transition>
		<transition>
			<source ref="id75"/>
			<target ref="id76"/>
			<label kind="synchronisation" x="-335" y="-15">move[id]?</label>
			<label kind="assignment" x="-335" y="0">t=0,position[id][1]=false</label>
		</transition>
		<transition>
			<source ref="id76"/>
			<target ref="id73"/>
			<label kind="guard" x="-410" y="-105">t&gt;=7</label>
			<label kind="assignment" x="-410" y="-75">t=0,position[id][0]=true</label>
		</transition>
		<transition>
			<source ref="id75"/>
			<target ref="id77"/>
			<label kind="synchronisation" x="-185" y="-15">move[id]?</label>
			<label kind="assignment" x="-185" y="0">t=0,position[id][1]=false</label>
		</transition>
		<transition>
			<source ref="id77"/>
			<target ref="id80"/>
			<label kind="guard" x="-110" y="45">t&gt;=3</label>
			<label kind="assignment" x="-110" y="75">t=0,position[id][2]=true</label>
		</transition>
		<transition>
			<source ref="id75"/>
			<target ref="id78"/>
			<label kind="synchronisation" x="-110" y="-15">move[id]?</label>
			<label kind="assignment" x="-110" y="0">t=0,position[id][1]=false</label>
		</transition>
		<transition>
			<source ref="id78"/>
			<target ref="id84"/>
			<label kind="guard" x="40" y="120">t&gt;=5</label>
			<label kind="assignment" x="40" y="150">t=0,position[id][3]=true</label>
		</transition>
		<transition>
			<source ref="id75"/>
			<target ref="id79"/>
			<label kind="synchronisation" x="40" y="-15">move[id]?</label>
			<label kind="assignment" x="40" y="0">t=0,position[id][1]=false</label>
		</transition>
		<transition>
			<source ref="id79"/>
			<target ref="id90"/>
			<label kind="guard" x="340" y="270">t&gt;=1</label>
			<label kind="assignment" x="340" y="300">t=0,position[id][5]=true</label>
		</transition>
		<transition>
			<source ref="id80"/>
			<target ref="id81"/>
			<label kind="synchronisation" x="-185" y="135">move[id]?</label>
			<label kind="assignment" x="-185" y="150">t=0,position[id][2]=false</label>
		</transition>
		<transition>
			<source ref="id81"/>
			<target ref="id75"/>
			<label kind="guard" x="-260" y="45">t&gt;=3</label>
			<label kind="assignment" x="-260" y="75">t=0,position[id][1]=true</label>
		</transition>
		<transition>
			<source ref="id80"/>
			<target ref="id82"/>
			<label kind="synchronisation" x="-35" y="135">move[id]?</label>
			<label kind="assignment" x="-35" y="150">t=0,position[id][2]=false</label>
		</transition>
		<transition>
			<source ref="id82"/>
			<target ref="id84"/>
			<label kind="guard" x="40" y="195">t&gt;=1</label>
			<label kind="assignment" x="40" y="225">t=0,position[id][3]=true</label>
		</transition>
		<transition>
			<source ref="id80"/>
			<target ref="id83"/>
			<label kind="synchronisation" x="40" y="135">move[id]?</label>
			<label kind="assignment" x="40" y="150">t=0,position[id][2]=false</label>
		</transition>
		<transition>
			<source ref="id83"/>
			<target ref="id88"/>
			<label kind="guard" x="190" y="270">t&gt;=1</label>
			<label kind="assignment" x="190" y="300">t=0,position[id][4]=true</label>
		</transition>
		<transition>
			<source ref="id84"/>
			<target ref="id85"/>
			<label kind="synchronisation" x="-110" y="285">move[id]?</label>
			<label kind="assignment" x="-110" y="300">t=0,position[id][3]=false</label>
		</transition>
		<transition>
			<source ref="id85"/>
			<target ref="id75"/>
			<label kind="guard" x="-260" y="120">t&gt;=5</label>
			<label kind="assignment" x="-260" y="150">t=0,position[id][1]=true</label>
		</transition>
		<transition>
			<source ref="id84"/>
			<target ref="id86"/>
			<label kind="synchronisation" x="-35" y="285">move[id]?</label>
			<label kind="assignment" x="-35" y="300">t=0,position[id][3]=false</label>
		</transition>
		<transition>
			<source ref="id86"/>
			<target ref="id80"/>
			<label kind="guard" x="-110" y="195">t&gt;=1</label>
			<label kind="assignment" x="-110" y="225">t=0,position[id][2]=true</label>
		</transition>
		<transition>
			<source ref="id84"/>
			<target ref="id87"/>
			<label kind="synchronisation" x="190" y="285">move[id]?</label>
			<label kind="assignment" x="190" y="300">t=0,position[id][3]=false</label>
		</transition>
		<transition>
			<source ref="id87"/>
			<target ref="id90"/>
			<label kind="guard" x="340" y="420">t&gt;=7</label>
			<label kind="assignment" x="340" y="450">t=0,position[id][5]=true</label>
		</transition>
		<transition>
			<source ref="id88"/>
			<target ref="id89"/>
			<label kind="synchronisation" x="40" y="435">move[id]?</label>
			<label kind="assignment" x="40" y="450">t=0,position[id][4]=false</label>
		</transition>
		<transition>
			<source ref="id89"/>
			<target ref="id80"/>
			<label kind="guard" x="-110" y="270">t&gt;=1</label>
			<label kind="assignment" x="-110" y="300">t=0,position[id][2]=true</label>
		</transition>
		<transition>
			<source ref="id90"/>
			<target ref="id91"/>
			<label kind="synchronisation" x="115" y="585">move[id]?</label>
			<label kind="assignment" x="115" y="600">t=0,position[id][5]=false</label>
		</transition>
		<transition>
			<source ref="id91"/>
			<target ref="id80"/>
			<label kind="guard" x="-110" y="345">t&gt;=1</label>
			<label kind="assignment" x="-110" y="375">t=0,position[id][2]=true</label>
		</transition>
	</template>
	<template>
		<name>TaskExecution3</name>
		<parameter>const AgentScale id</parameter>
		<declaration>clock t;
bool tf[TaskNum]={true,false,false,false};
bool ts[TaskNum]={true,false,false,false};

void updateIteration()
{
	int i=0;
	bool finish = true;
	for(i=1;i&lt;=RegularTaskNum[id];i++)
	{
		finish &amp;= tf[i];
	}
	if(finish)
	{
		for(i=1;i&lt;=RegularTaskNum[id];i++)
		{
			tf[i]=false;
		}
		
		iteration[id]+=1;
		if(iteration[id]==MaxIteration)
		{
			iteration[id]=0;
		}
	}
	else
	{
    	finish = true;
	}
}

</declaration>
		<location id="id92" x="-400" y="-200">
			<name x="-410" y="-230">T0</name>
		</location>
		<location id="id93" x="-700" y="-200">
			<name x="-710" y="-230">T1</name>
			<label kind="invariant" x="-710" y="-185">t&lt;=17</label>
		</location>
		<location id="id94" x="-400" y="-500">
			<name x="-410" y="-530">T2</name>
			<label kind="invariant" x="-410" y="-485">t&lt;=11</label>
		</location>
		<location id="id95" x="-100" y="-200">
			<name x="-110" y="-230">T3</name>
			<label kind="invariant" x="-110" y="-185">t&lt;=5</label>
		</location>
		<init ref="id92"/>
		<transition>
			<source ref="id92"/>
			<target ref="id92"/>
			<label kind="synchronisation" x="-460" y="-215">move[id]!</label>
			<label kind="assignment" x="-460" y="-200">t=0</label>
			<nail x="-430" y="-230"/>
			<nail x="-370" y="-230"/>
		</transition>
		<transition>
			<source ref="id92"/>
			<target ref="id93"/>
			<label kind="guard" x="-610" y="-230">position[id][0]</label>
			<label kind="assignment" x="-610" y="-200">t=0,ts[1]=true,tf[1]=false</label>
		</transition>
		<transition>
			<source ref="id93"/>
			<target ref="id92"/>
			<label kind="guard" x="-550" y="0">t&gt;=17</label>
			<label kind="assignment" x="-520" y="30">t=0,ts[1]=false,tf[1]=true,
updateIteration()</label>
			<nail x="-550" y="0"/>
		</transition>
		<transition>
			<source ref="id92"/>
			<target ref="id94"/>
			<label kind="guard" x="-460" y="-380">position[id][1]&amp;&amp;(tf[1])</label>
			<label kind="assignment" x="-460" y="-350">t=0,ts[2]=true,tf[2]=false</label>
		</transition>
		<transition>
			<source ref="id94"/>
			<target ref="id92"/>
			<label kind="guard" x="-550" y="-350">t&gt;=11</label>
			<label kind="assignment" x="-520" y="-320">t=0,ts[2]=false,tf[2]=true,
updateIteration()</label>
			<nail x="-550" y="-350"/>
		</transition>
		<transition>
			<source ref="id92"/>
			<target ref="id95"/>
			<label kind="guard" x="-310" y="-230">position[id][2]&amp;&amp;(tf[2])</label>
			<label kind="assignment" x="-310" y="-200">t=0,ts[3]=true,tf[3]=false</label>
		</transition>
		<transition>
			<source ref="id95"/>
			<target ref="id92"/>
			<label kind="guard" x="-250" y="-350">t&gt;=5</label>
			<label kind="assignment" x="-220" y="-320">t=0,ts[3]=false,tf[3]=true,
updateIteration()</label>
			<nail x="-250" y="-350"/>
		</transition>
	</template>
	<system>movement0 = Movement0(0);
taskExe0 = TaskExecution0(0);
movement1 = Movement1(1);
taskExe1 = TaskExecution1(1);
movement2 = Movement2(2);
taskExe2 = TaskExecution2(2);
movement3 = Movement3(3);
taskExe3 = TaskExecution3(3);

system movement0, taskExe0, movement1, taskExe1;</system>
	<queries>
		<query>
			<formula></formula>
			<comment>Task Coverage</comment>
		</query>
		<query>
			<formula></formula>
			<comment>Task Coverage</comment>
		</query>
		<query>
			<formula>E&lt;&gt; forall(i:int[0,1]) iteration[i]&gt;=1</formula>
			<comment></comment>
		</query>
		<query>
			<formula></formula>
			<comment>Task Coverage</comment>
		</query>
		<query>
			<formula></formula>
			<comment>Task Coverage</comment>
		</query>
	</queries>
</nta>
